# Slingshot Microservices Configuration
# Copy this file to .env and update with your values

# Environment
NODE_ENV=development
LOG_LEVEL=info

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
# REDIS_PASSWORD=your_redis_password
REDIS_DB=0

# Authentication
DASHBOARD_SECRET=your_dashboard_secret_here
WEBHOOK_SECRET=your_webhook_secret_here

# Service Ports
TRADOVATE_SERVICE_PORT=3011
MARKET_DATA_SERVICE_PORT=3012
TRADE_ORCHESTRATOR_PORT=3013
MONITORING_SERVICE_PORT=3014

# Service Binding Configuration
# Monitoring service binds to all interfaces (0.0.0.0) for external access
# Internal services bind to localhost (127.0.0.1) for security
BIND_HOST=0.0.0.0  # For monitoring-service (external)
# BIND_HOST=127.0.0.1  # For internal services

# Internal Service URLs (for proxy routes from monitoring-service)
TRADE_ORCHESTRATOR_URL=http://localhost:3013
MARKET_DATA_SERVICE_URL=http://localhost:3012
TRADOVATE_SERVICE_URL=http://localhost:3011
MONITORING_SERVICE_URL=http://localhost:3014

# Tradovate API Configuration
TRADOVATE_USE_DEMO=true
TRADOVATE_USERNAME=your_username
TRADOVATE_PASSWORD=your_password
# TRADOVATE_CID=your_cid
# TRADOVATE_SEC=your_secret
# TRADOVATE_APP_ID=your_app_id
# TRADOVATE_APP_VERSION=1.0.0

# Tradovate URLs (defaults are usually fine)
TRADOVATE_DEMO_URL=https://demo.tradovateapi.com/v1
TRADOVATE_LIVE_URL=https://live.tradovateapi.com/v1
TRADOVATE_WSS_DEMO_URL=wss://demo.tradovateapi.com/v1/websocket
TRADOVATE_WSS_LIVE_URL=wss://live.tradovateapi.com/v1/websocket

# Firebase Configuration (for monitoring service)
FIREBASE_API_KEY=your_firebase_api_key
FIREBASE_AUTH_DOMAIN=your_firebase_auth_domain
FIREBASE_DATABASE_URL=your_firebase_database_url
FIREBASE_PROJECT_ID=your_firebase_project_id

# Full Sync Configuration
# Enable/disable scheduled sync (runs every N hours)
ENABLE_SCHEDULED_SYNC=true
SYNC_INTERVAL_HOURS=6

# Enable/disable market hours sync (5:15pm & 5:45pm EST)
ENABLE_MARKET_HOURS_SYNC=false

# Tradier API Configuration (for options flow data)
TRADIER_ACCESS_TOKEN=your_tradier_access_token_here
TRADIER_ACCOUNT_ID=your_tradier_account_id
TRADIER_BASE_URL=https://api.tradier.com/v1
# Use sandbox for testing (15-min delayed data, no funded account required)
# TRADIER_BASE_URL=https://sandbox.tradier.com/v1

# Tradier Service Control
TRADIER_ENABLED=true
TRADIER_AUTO_START=true

# Options Flow Configuration
RISK_FREE_RATE=0.05
EXPOSURE_POLL_INTERVAL_MINUTES=2
TRADIER_SYMBOLS=SPY,QQQ
TRADIER_MAX_EXPIRATIONS=6

# Exposure calculation thresholds (in billions for GEX)
GEX_STRONG_POSITIVE_THRESHOLD=5.0
GEX_POSITIVE_THRESHOLD=1.0
GEX_NEUTRAL_THRESHOLD=-1.0
GEX_NEGATIVE_THRESHOLD=-5.0

# Strategy Selection
# Options: 'gex-scalp' (default), 'iv-skew-gex'
ACTIVE_STRATEGY=gex-scalp

# IV Skew GEX Strategy Configuration (backtested optimal values)
IV_SKEW_STOP_LOSS_POINTS=70
IV_SKEW_TAKE_PROFIT_POINTS=70
IV_SKEW_BREAKEVEN_STOP=true
IV_SKEW_BREAKEVEN_TRIGGER=25
IV_SKEW_BREAKEVEN_OFFSET=-45
IV_SKEW_LEVEL_PROXIMITY=25
IV_SKEW_NEG_THRESHOLD=-0.01
IV_SKEW_POS_THRESHOLD=0.01
IV_SKEW_MIN_IV=0.18
IV_SKEW_COOLDOWN_MS=1800000

# GF (Zero Gamma) Early Exit Configuration
# Monitors Zero Gamma movement during trades and moves stop to breakeven after consecutive adverse moves
# Check interval is fixed at 15 minutes to match backtest GEX data resolution
GF_EARLY_EXIT_ENABLED=false
GF_BREAKEVEN_THRESHOLD=2

# Cross-Strategy Signal Filtering
# Set to 'false' to disable all cross-strategy filtering rules
CROSS_STRATEGY_FILTER_ENABLED=true

# Discord Notifications
# Create a webhook in your Discord server: Server Settings → Integrations → Webhooks
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR_WEBHOOK_ID/YOUR_WEBHOOK_TOKEN
DISCORD_NOTIFICATIONS_ENABLED=false
DISCORD_STRATEGY_WHITELIST=IV_SKEW_GEX,ES_CROSS_SIGNAL

# TradingView JWT Token Auto-Refresh
# When enabled, the signal generator will automatically refresh the JWT token
# via HTTP login every 3 hours and on delayed quote detection.
# Requires TRADINGVIEW_CREDENTIALS to be set with valid base64-encoded {username, password}
TV_TOKEN_REFRESH_ENABLED=true

# Macro Briefing Service
FRED_API_KEY=your_fred_api_key_here
ANTHROPIC_API_KEY=your_anthropic_api_key_here
MACRO_BRIEFING_SCHEDULE=30 6 * * 1-5
MACRO_BRIEFING_MODEL=claude-sonnet-4-5-20250929
MACRO_BRIEFING_EMAIL_TO=
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=